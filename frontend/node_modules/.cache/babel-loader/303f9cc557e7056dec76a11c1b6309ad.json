{"ast":null,"code":"import _toConsumableArray from\"C:/Users/coolermaster/PycharmProjects/Updated_trivia_project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/coolermaster/PycharmProjects/Updated_trivia_project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/coolermaster/PycharmProjects/Updated_trivia_project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/coolermaster/PycharmProjects/Updated_trivia_project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/coolermaster/PycharmProjects/Updated_trivia_project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/coolermaster/PycharmProjects/Updated_trivia_project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/coolermaster/PycharmProjects/Updated_trivia_project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/coolermaster/PycharmProjects/Updated_trivia_project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import ServerConnection from\"../Main Page/Api Connection/serverConnection\";import DoQuestion from\"./DoQuestion\";import Button from\"react-bootstrap/Button\";import HomeButton from\"../Sign Up/returnToHomePage\";import'./DoQuiz.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DoQuiz=/*#__PURE__*/function(_React$Component){_inherits(DoQuiz,_React$Component);var _super=_createSuper(DoQuiz);function DoQuiz(props){var _this;_classCallCheck(this,DoQuiz);_this=_super.call(this,props);_this.state={questionList:[],userAnswers:[]};_this.getQuiz=_this.getQuiz.bind(_assertThisInitialized(_this));_this.getScore=_this.getScore.bind(_assertThisInitialized(_this));_this.setQuestionComponent=_this.setQuestionComponent.bind(_assertThisInitialized(_this));_this.addAnswer=_this.addAnswer.bind(_assertThisInitialized(_this));return _this;}_createClass(DoQuiz,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.getQuiz().then(function(json){return _this2.setState({questionList:json[0]});});}},{key:\"getQuiz\",value:function(){var _getQuiz=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ServerConnection.getQuiz(this.props.quiz,this.props.jwtToken).then(function(response){return response;});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee,this);}));function getQuiz(){return _getQuiz.apply(this,arguments);}return getQuiz;}()},{key:\"addAnswer\",value:function addAnswer(answer){var userAnswers=_toConsumableArray(this.state.userAnswers);userAnswers.push(answer);this.setState({userAnswers:userAnswers});}},{key:\"showResult\",value:function showResult(){return this.state.userAnswers.length<this.state.questionList.length;}},{key:\"getScore\",value:function getScore(){var trueAnswers=[];this.state.userAnswers.map(function(answer){return answer===true?trueAnswers.push(answer):null;});return Math.floor(trueAnswers.length*100/this.state.questionList.length);}},{key:\"updatePercentage\",value:function(){var _updatePercentage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var percentage,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:percentage=this.getScore();_context2.next=3;return ServerConnection.updatePercentage(this.props.quiz,percentage,this.props.user).then(function(response){return response;});case 3:response=_context2.sent;alert(response);case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function updatePercentage(){return _updatePercentage.apply(this,arguments);}return updatePercentage;}()},{key:\"setQuestionComponent\",value:function setQuestionComponent(){var question=this.state.questionList[this.state.userAnswers.length];return/*#__PURE__*/_jsx(DoQuestion,{question:question,questionNumber:this.state.userAnswers.length+1,addAnswer:this.addAnswer});}},{key:\"render\",value:function render(){if(this.state.questionList.length===0){return/*#__PURE__*/_jsx(\"span\",{children:\"Loading Quiz ... \"});}else{var quizShow;if(this.showResult()){quizShow=this.setQuestionComponent();}else{quizShow=/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"score-text\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"You scored \",this.getScore(),\" out of 100!\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-button\",children:/*#__PURE__*/_jsx(Button,{block:true,size:\"lg\",type:\"submit\",onClick:this.updatePercentage.bind(this),children:\"Submit Quiz\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"home-button\",children:/*#__PURE__*/_jsx(HomeButton,{})})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"quiz\",children:quizShow});}}}]);return DoQuiz;}(React.Component);export default DoQuiz;","map":{"version":3,"sources":["C:/Users/coolermaster/PycharmProjects/Updated_trivia_project/frontend/src/components/Do Quiz/DoQuiz.js"],"names":["React","ServerConnection","DoQuestion","Button","HomeButton","DoQuiz","props","state","questionList","userAnswers","getQuiz","bind","getScore","setQuestionComponent","addAnswer","then","json","setState","quiz","jwtToken","response","answer","push","length","trueAnswers","map","Math","floor","percentage","updatePercentage","user","alert","question","quizShow","showResult","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ServerConnection from \"../Main Page/Api Connection/serverConnection\";\r\nimport DoQuestion from \"./DoQuestion\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport HomeButton from \"../Sign Up/returnToHomePage\";\r\nimport './DoQuiz.css'\r\n\r\nclass DoQuiz extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            questionList: [],\r\n            userAnswers: []\r\n        }\r\n        this.getQuiz = this.getQuiz.bind(this);\r\n        this.getScore = this.getScore.bind(this);\r\n        this.setQuestionComponent = this.setQuestionComponent.bind(this);\r\n        this.addAnswer = this.addAnswer.bind(this);\r\n\r\n    }\r\n\r\n     componentDidMount() {\r\n        this.getQuiz().then(json => this.setState({questionList: json[0]}))\r\n    }\r\n\r\n\r\n    async getQuiz() {\r\n        return await ServerConnection.getQuiz(this.props.quiz, this.props.jwtToken).then(response => response);\r\n    }\r\n\r\n    addAnswer(answer) {\r\n        let userAnswers = [...this.state.userAnswers];\r\n        userAnswers.push(answer)\r\n        this.setState({userAnswers: userAnswers});\r\n    }\r\n\r\n    showResult() {\r\n        return this.state.userAnswers.length < this.state.questionList.length;\r\n    }\r\n\r\n    getScore() {\r\n        let trueAnswers = []\r\n        this.state.userAnswers.map(answer => (answer === true ? trueAnswers.push(answer): null))\r\n\r\n        return Math.floor(trueAnswers.length * 100 / this.state.questionList.length);\r\n    }\r\n\r\n    async updatePercentage() {\r\n        const percentage = this.getScore();\r\n        const response =  await ServerConnection.updatePercentage(this.props.quiz, percentage, this.props.user).then(response => response)\r\n        alert(response)\r\n    }\r\n\r\n    setQuestionComponent() {\r\n        let question = this.state.questionList[this.state.userAnswers.length];\r\n        return <DoQuestion question={question} questionNumber={this.state.userAnswers.length + 1} addAnswer={this.addAnswer}/>\r\n\r\n    }\r\n\r\n    render() {\r\n        if (this.state.questionList.length === 0) {\r\n            return (\r\n                <span>Loading Quiz ... </span>\r\n            )\r\n        } else {\r\n            let quizShow;\r\n            if (this.showResult()) {\r\n                quizShow = this.setQuestionComponent();\r\n            } else {\r\n                quizShow = (\r\n                    <div className=\"container\">\r\n                        <div className=\"score-text\">\r\n                            <h3>You scored {this.getScore()} out of 100!</h3>\r\n                        </div>\r\n                        <div className=\"submit-button\">\r\n                        <Button block size=\"lg\" type=\"submit\"\r\n                                               onClick={this.updatePercentage.bind(this)}>Submit Quiz</Button>\r\n                    </div>\r\n                        <div className=\"home-button\">\r\n                            <HomeButton/>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n            return (<div className=\"quiz\">\r\n                    {quizShow}\r\n                </div>\r\n\r\n            )\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default DoQuiz;"]},"metadata":{},"sourceType":"module"}